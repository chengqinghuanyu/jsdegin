<!DOCTYPE>
<html>

<head>
    <meta charset="utf-8">
    <title>状态模式--超级玛丽</title>

</head>

<body>
    <script>
        //解决多条件判断问题
        window.onload = function() {

            var MayyState = function() {
                var _currentState = {},
                    states = {
                        jump: function() {
                            console.log('jump');
                        },
                        move: function() {
                            console.log('move');
                        },
                        shoot: function() {
                            console.log('shoot');
                        },
                        squat: function() {
                            console.log('squat');
                        }
                    }



                //动作控制类
                var Action = {
                    changeState: function() {
                        var arg = arguments;
                        _currentState = {};
                        if (arg.length) {
                            for (var i = 0, len = arg.length; i < len; i++) {
                                _currentState[arg[i]] = true;
                            }
                        }
                        return this;
                    },
                    goes: function() {
                        console.log("触发一次动作");
                        for (var i in _currentState) {
                            states[i] && states[i]();
                        }
                        return this;
                    }

                }

                return {
                    change: Action.changeState,
                    goes: Action.goes
                }

            }

            var maryy = new MayyState();
            maryy.change("jump", 'shoot').goes().goes().change("shoot").goes();
        }
    </script>

</body>

</html>