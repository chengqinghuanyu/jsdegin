<!DOCTYPE>
<html>

<head>
    <meta charset="utf-8">
    <title>享元模式</title>
</head>

<body>

    <script>
        window.onload = function() {
            var article = ["aaaaa", "bbbb", "aaaaa", "bbbb", "aaaaa", "bbbb", "aaaaa", "bbbb", "aaaaa", "bbbb", "aaaaa", "bbbb", "aaaaa", "bbbb", "aaaaa", "bbbb", "aaaaa", "bbbb"]
                //创建享元对象
            var Flyweight = function() {
                var created = [];

                function create() {
                    var dom = document.createElement('div');
                    document.getElementById("container").appendChild(dom);
                    created.push(dom);
                    return dom;
                }
                return {
                    getDiv: function() {
                        if (created.length < 5) {
                            return create();
                        } else {
                            var div = created.shift();
                            created.push(div);
                            return div;
                        }
                    }
                }
            }()


            var paper = 0,
                num = 5,
                len = article.length;
            for (var i = 0; i < 5; i++) {
                if (article[i]) {

                    Flyweight.getDiv().innerHTML = article[i]
                }
            }

            document.getElementById("next_page").onclick = function() {

                if (article.length < 5)
                    return
                var n = ++paper * num % len,
                    j = 0;
                for (; j < num; j++) {
                    if (article[n + j]) {
                        Flyweight.getDiv().innerHTML = article[n + j];
                    } else if (article[n + j - len]) {
                        Flyweight.getDiv.innerHTML = article[n + j - len]
                    } else {
                        Flyweight.getDiv().innerHTML = ""
                    }
                }

            }
        }
    </script>
    <div id="container"></div>
    <div id="next_page">下一页</div>
</body>

</html>